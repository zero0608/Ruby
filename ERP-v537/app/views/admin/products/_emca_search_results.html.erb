<div class="table-responsive flex-auto">
  <table class="table table-borderless table-hover">
    <thead>
      <tr>
        <th style="width: 20%">
          <%= link_to "Description #{arrow :title}", "#", class: column_css(:title), data: { reflex: "click->ProductReflex#order", column_name: :title, direction: direction } %>
        </th>
        <th style="width: 10%">SKU</th>
        <th style="width: 10%">Type</th>
        <th style="width: 10%">On Hand</th>
        <th style="width: 10%">Supplier</th>
        <th style="width: 10%">Factory</th>
        <th style="width: 10%">Category</th>
        <th style="width: 10%">Sub-category</th>
        <th style="width: 10%">Action</th>
      </tr>
    </thead>
    <tbody>
      <% if @pagy.count > 0 %>
        <% @products.each do |product| %>
          <tr>
            <td><%= link_to product.title, admin_product_path(product.id), data: { turbolinks: false } %></td>
            <td><%= product&.sku&.upcase %></td>
            <td><%= (ShipmentCode.pluck(:sku_for_discount).include? product.sku) ? 'Service' : 'Stock' %></td>
            <td><%= product&.quantity %></td>
            <td><%= product&.supplier&.name %></td>
            <td><%= product&.factory&.name %></td>
            <td><%= product&.category&.title %></td>
            <td><%= product&.subcategory&.name %></td>
            <td>
              <a href="<%= edit_admin_product_path(product.id) %>" class="mr-4">
                <%= show_svg("recent_activity.svg") %>
              </a>
              <%= link_to admin_product_path(product.id), method: :delete, data: { confirm: "Are you sure you want to delete this product?" } do %>
                <%= show_svg("close.svg") %>
              <% end %>
            </td>
          </tr>
        <% end %>
      <% end %>
    </tbody>
  </table>
</div>

<% if @pagy.count > 1 %>
  <div id="page-nav">
    <%= render partial: "emca_paginator" %>
  </div>
<% end %>